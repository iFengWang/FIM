{"ast":null,"code":"import _regeneratorRuntime from\"/Users/feng/Work/Project/df/df.im/df.im.client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/feng/Work/Project/df/df.im/df.im.client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";// Dynamically determine the backend URL based on current window location\nvar BASE_URL=function(){var protocol=window.location.protocol;var hostname=window.location.hostname;// 始终使用3000端口\nreturn\"\".concat(protocol,\"//\").concat(hostname,\":3000/\");}();var GET_USER=\"user/\";export function getUserList(_x){return _getUserList.apply(this,arguments);}/* export async function postUser(user) {\n  let url = BASE_URL + GET_USER;\n  let option = {\n    method: \"GET\",\n    body: JSON.stringify(user),\n  };\n  try {\n    let response = await fetch(url);\n    if (response.ok) {\n      return await { data: response.json() };\n    } else {\n      throw new Error(response.statusText);\n    }\n  } catch (error) {\n    console.log(\"Request Failed\", error);\n  }\n} */function _getUserList(){_getUserList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(uid){var url,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!uid||isNaN(uid))){_context.next=3;break;}console.error(\"Invalid uid:\",uid);return _context.abrupt(\"return\",{data:[]});case 3:url=BASE_URL+GET_USER+uid;_context.prev=4;console.log(\"Fetching users from:\",url);_context.next=8;return fetch(url);case 8:response=_context.sent;if(!response.ok){_context.next=17;break;}_context.next=12;return response.json();case 12:data=_context.sent;console.log(\"getUserList response:\",data);return _context.abrupt(\"return\",{data:data});case 17:throw new Error(response.statusText);case 18:_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](4);console.error(\"Request Failed:\",_context.t0);return _context.abrupt(\"return\",{data:[]});case 24:case\"end\":return _context.stop();}}},_callee,null,[[4,20]]);}));return _getUserList.apply(this,arguments);}","map":{"version":3,"names":["BASE_URL","protocol","window","location","hostname","GET_USER","getUserList","uid","isNaN","console","error","data","url","log","fetch","response","ok","json","Error","statusText"],"sources":["/Users/feng/Work/Project/df/df.im/df.im.client/src/im/imApi.js"],"sourcesContent":["// Dynamically determine the backend URL based on current window location\nconst BASE_URL = (() => {\n  const protocol = window.location.protocol;\n  const hostname = window.location.hostname;\n  // 始终使用3000端口\n  return `${protocol}//${hostname}:3000/`;\n})();\nconst GET_USER = \"user/\";\n\nexport async function getUserList(uid) {\n  if (!uid || isNaN(uid)) {\n    console.error(\"Invalid uid:\", uid);\n    return { data: [] }; // 返回空数组而不是null\n  }\n  let url = BASE_URL + GET_USER + uid;\n  try {\n    console.log(\"Fetching users from:\", url);\n    let response = await fetch(url);\n    if (response.ok) {\n      const data = await response.json();\n      console.log(\"getUserList response:\", data);\n      return { data: data }; // 确保返回正确的数据结构\n    } else {\n      throw new Error(response.statusText);\n    }\n  } catch (error) {\n    console.error(\"Request Failed:\", error);\n    return { data: [] }; // 错误时返回空数组而不是null\n  }\n}\n\n/* export async function postUser(user) {\n  let url = BASE_URL + GET_USER;\n  let option = {\n    method: \"GET\",\n    body: JSON.stringify(user),\n  };\n  try {\n    let response = await fetch(url);\n    if (response.ok) {\n      return await { data: response.json() };\n    } else {\n      throw new Error(response.statusText);\n    }\n  } catch (error) {\n    console.log(\"Request Failed\", error);\n  }\n} */\n"],"mappings":"wRAAA;AACA,GAAMA,SAAQ,CAAI,UAAM,CACtB,GAAMC,SAAQ,CAAGC,MAAM,CAACC,QAAQ,CAACF,QAAQ,CACzC,GAAMG,SAAQ,CAAGF,MAAM,CAACC,QAAQ,CAACC,QAAQ,CACzC;AACA,gBAAUH,QAAQ,cAAKG,QAAQ,WACjC,CAAC,EAAG,CACJ,GAAMC,SAAQ,CAAG,OAAO,CAExB,eAAsBC,YAAW,gDAsBjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAhBA,+FAtBO,iBAA2BC,GAAG,+IAC/B,CAACA,GAAG,EAAIC,KAAK,CAACD,GAAG,CAAC,0BACpBE,OAAO,CAACC,KAAK,CAAC,cAAc,CAAEH,GAAG,CAAC,CAAC,gCAC5B,CAAEI,IAAI,CAAE,EAAG,CAAC,SAEjBC,GAAG,CAAGZ,QAAQ,CAAGK,QAAQ,CAAGE,GAAG,iBAEjCE,OAAO,CAACI,GAAG,CAAC,sBAAsB,CAAED,GAAG,CAAC,CAAC,sBACpBE,MAAK,CAACF,GAAG,CAAC,QAA3BG,QAAQ,mBACRA,QAAQ,CAACC,EAAE,iDACMD,SAAQ,CAACE,IAAI,EAAE,SAA5BN,IAAI,eACVF,OAAO,CAACI,GAAG,CAAC,uBAAuB,CAAEF,IAAI,CAAC,CAAC,gCACpC,CAAEA,IAAI,CAAEA,IAAK,CAAC,eAEf,IAAIO,MAAK,CAACH,QAAQ,CAACI,UAAU,CAAC,0FAGtCV,OAAO,CAACC,KAAK,CAAC,iBAAiB,aAAQ,CAAC,gCACjC,CAAEC,IAAI,CAAE,EAAG,CAAC,uEAEtB"},"metadata":{},"sourceType":"module"}