{"ast":null,"code":"import _regeneratorRuntime from\"/Users/feng/Work/Project/df/df.im/df.im.client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/feng/Work/Project/df/df.im/df.im.client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useSocket}from\"../contexts/imSocket\";import{setIncomingCall}from\"./imStore\";import VideoInviteDialog from\"./VideoInviteDialog\";import{jsx as _jsx}from\"react/jsx-runtime\";function VideoInviteContainer(){var dispatch=useDispatch();var _useSocket=useSocket(),socket=_useSocket.socket,sendVideoAccept=_useSocket.sendVideoAccept,sendVideoReject=_useSocket.sendVideoReject;var incomingCall=useSelector(function(state){return state.imReducer.incomingCall;});var handleAcceptCall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!socket||!incomingCall)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:sendVideoAccept(incomingCall.from);dispatch(setIncomingCall(null));case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleAcceptCall(){return _ref.apply(this,arguments);};}();var handleRejectCall=function handleRejectCall(){if(!socket||!incomingCall)return;sendVideoReject(incomingCall.from);dispatch(setIncomingCall(null));};if(!incomingCall)return null;return/*#__PURE__*/_jsx(VideoInviteDialog,{caller:incomingCall.fromName,onAccept:handleAcceptCall,onReject:handleRejectCall});}export default VideoInviteContainer;","map":{"version":3,"names":["React","useSelector","useDispatch","useSocket","setIncomingCall","VideoInviteDialog","VideoInviteContainer","dispatch","socket","sendVideoAccept","sendVideoReject","incomingCall","state","imReducer","handleAcceptCall","from","handleRejectCall","fromName"],"sources":["/Users/feng/Work/Project/df/df.im/df.im.client/src/im/VideoInviteContainer.js"],"sourcesContent":["import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useSocket } from \"../contexts/imSocket\";\nimport { setIncomingCall } from \"./imStore\";\nimport VideoInviteDialog from \"./VideoInviteDialog\";\n\nfunction VideoInviteContainer() {\n  const dispatch = useDispatch();\n  const { socket, sendVideoAccept, sendVideoReject } = useSocket();\n  const incomingCall = useSelector((state) => state.imReducer.incomingCall);\n\n  const handleAcceptCall = async () => {\n    if (!socket || !incomingCall) return;\n\n    sendVideoAccept(incomingCall.from);\n    dispatch(setIncomingCall(null));\n  };\n\n  const handleRejectCall = () => {\n    if (!socket || !incomingCall) return;\n\n    sendVideoReject(incomingCall.from);\n    dispatch(setIncomingCall(null));\n  };\n\n  if (!incomingCall) return null;\n\n  return (\n    <VideoInviteDialog\n      caller={incomingCall.fromName}\n      onAccept={handleAcceptCall}\n      onReject={handleRejectCall}\n    />\n  );\n}\n\nexport default VideoInviteContainer;\n"],"mappings":"wRAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,KAAQ,sBAAsB,CAChD,OAASC,eAAe,KAAQ,WAAW,CAC3C,MAAOC,kBAAiB,KAAM,qBAAqB,CAAC,2CAEpD,QAASC,qBAAoB,EAAG,CAC9B,GAAMC,SAAQ,CAAGL,WAAW,EAAE,CAC9B,eAAqDC,SAAS,EAAE,CAAxDK,MAAM,YAANA,MAAM,CAAEC,eAAe,YAAfA,eAAe,CAAEC,eAAe,YAAfA,eAAe,CAChD,GAAMC,aAAY,CAAGV,WAAW,CAAC,SAACW,KAAK,QAAKA,MAAK,CAACC,SAAS,CAACF,YAAY,GAAC,CAEzE,GAAMG,iBAAgB,4FAAG,0IACnB,CAACN,MAAM,EAAI,CAACG,YAAY,kEAE5BF,eAAe,CAACE,YAAY,CAACI,IAAI,CAAC,CAClCR,QAAQ,CAACH,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,sDACjC,kBALKU,iBAAgB,0CAKrB,CAED,GAAME,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC7B,GAAI,CAACR,MAAM,EAAI,CAACG,YAAY,CAAE,OAE9BD,eAAe,CAACC,YAAY,CAACI,IAAI,CAAC,CAClCR,QAAQ,CAACH,eAAe,CAAC,IAAI,CAAC,CAAC,CACjC,CAAC,CAED,GAAI,CAACO,YAAY,CAAE,MAAO,KAAI,CAE9B,mBACE,KAAC,iBAAiB,EAChB,MAAM,CAAEA,YAAY,CAACM,QAAS,CAC9B,QAAQ,CAAEH,gBAAiB,CAC3B,QAAQ,CAAEE,gBAAiB,EAC3B,CAEN,CAEA,cAAeV,qBAAoB"},"metadata":{},"sourceType":"module"}