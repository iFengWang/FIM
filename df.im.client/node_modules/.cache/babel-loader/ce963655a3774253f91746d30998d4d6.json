{"ast":null,"code":"import _slicedToArray from\"/Users/feng/Work/Project/df/df.im/df.im.client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useRef,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import Draggable from\"react-draggable\";import{incrementzIndex}from\"./imStore\";import{ThemeContext,Themes}from\"./imThemeContext\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export function ImDialog(props){var dispatch=useDispatch();var zIndex=useSelector(function(state){return state.imReducer.zIndex;});var nodeRef=useRef(null);useEffect(function(state){dispatch(incrementzIndex());if(!!nodeRef)nodeRef.current.style.zIndex=zIndex;},[]);var padding=props.padding||\"15px\";var _useState=useState(),_useState2=_slicedToArray(_useState,2),startPoint=_useState2[0],setStartPoint=_useState2[1];var themes=useContext(ThemeContext);return/*#__PURE__*/_jsx(Draggable,{allowAnyClick:false,enableUserSelectHack:true,nodeRef:nodeRef,scale:1,handle:\".im-handler\",cancel:props.cancel,defaultPosition:props.point,bounds:props.bounds,axis:props.axis,onStart:function onStart(e){dispatch(incrementzIndex());if(!!nodeRef)nodeRef.current.style.zIndex=zIndex;// let beginPoint = e.clientX + \",\" + e.clientY;\n// setStartPoint(beginPoint);\n// document.body.style.pointerEvents = \"auto\";\n}// onStop={(e) => {\n//   let stopPoint = e.clientX + \",\" + e.clientY;\n//   if (startPoint === stopPoint) {\n//     console.log(\"11111....true\");\n//     // document.body.style.pointerEvents = \"auto\";\n//   } else {\n//     console.log(\"22222....false\");\n//     // document.body.style.pointerEvents = \"none\";\n//   }\n// }}\n,children:/*#__PURE__*/_jsx(\"div\",{className:\"im-main\",style:props.style,ref:nodeRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"im-handler\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"im-container\",style:{padding:\"0px \".concat(padding)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"im-header\",children:[props.title,props.buttons]}),/*#__PURE__*/_jsx(\"div\",{className:\"im-content\",children:props.children}),/*#__PURE__*/_jsx(\"div\",{className:\"im-footer\",style:{height:padding}})]})})})});}","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","useSelector","useDispatch","Draggable","incrementzIndex","ThemeContext","Themes","ImDialog","props","dispatch","zIndex","state","imReducer","nodeRef","current","style","padding","startPoint","setStartPoint","themes","cancel","point","bounds","axis","e","title","buttons","children","height"],"sources":["/Users/feng/Work/Project/df/df.im/df.im.client/src/im/imCore.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Draggable from \"react-draggable\";\nimport { incrementzIndex } from \"./imStore\";\nimport { ThemeContext, Themes } from \"./imThemeContext\";\n\nexport function ImDialog(props) {\n  const dispatch = useDispatch();\n  const zIndex = useSelector((state) => state.imReducer.zIndex);\n\n  const nodeRef = useRef(null);\n  useEffect((state) => {\n    dispatch(incrementzIndex());\n    if (!!nodeRef) nodeRef.current.style.zIndex = zIndex;\n  }, []);\n\n  let padding = props.padding || \"15px\";\n\n  const [startPoint, setStartPoint] = useState();\n\n  const themes = useContext(ThemeContext);\n\n  return (\n    <Draggable\n      allowAnyClick={false}\n      enableUserSelectHack={true}\n      nodeRef={nodeRef}\n      scale={1}\n      handle=\".im-handler\"\n      cancel={props.cancel}\n      defaultPosition={props.point}\n      bounds={props.bounds}\n      axis={props.axis}\n      onStart={(e) => {\n        dispatch(incrementzIndex());\n        if (!!nodeRef) nodeRef.current.style.zIndex = zIndex;\n\n        // let beginPoint = e.clientX + \",\" + e.clientY;\n        // setStartPoint(beginPoint);\n        // document.body.style.pointerEvents = \"auto\";\n      }}\n      // onStop={(e) => {\n      //   let stopPoint = e.clientX + \",\" + e.clientY;\n      //   if (startPoint === stopPoint) {\n      //     console.log(\"11111....true\");\n      //     // document.body.style.pointerEvents = \"auto\";\n      //   } else {\n      //     console.log(\"22222....false\");\n      //     // document.body.style.pointerEvents = \"none\";\n      //   }\n      // }}\n    >\n      <div className=\"im-main\" style={props.style} ref={nodeRef}>\n        <div className=\"im-handler\">\n          <div className=\"im-container\" style={{ padding: `0px ${padding}` }}>\n            <div className=\"im-header\">\n              {props.title}\n              {props.buttons}\n            </div>\n            <div className=\"im-content\">{props.children}</div>\n            <div className=\"im-footer\" style={{ height: padding }}></div>\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  );\n}\n"],"mappings":"oIAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACtE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAOC,UAAS,KAAM,iBAAiB,CACvC,OAASC,eAAe,KAAQ,WAAW,CAC3C,OAASC,YAAY,CAAEC,MAAM,KAAQ,kBAAkB,CAAC,wFAExD,MAAO,SAASC,SAAQ,CAACC,KAAK,CAAE,CAC9B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,GAAMQ,OAAM,CAAGT,WAAW,CAAC,SAACU,KAAK,QAAKA,MAAK,CAACC,SAAS,CAACF,MAAM,GAAC,CAE7D,GAAMG,QAAO,CAAGd,MAAM,CAAC,IAAI,CAAC,CAC5BD,SAAS,CAAC,SAACa,KAAK,CAAK,CACnBF,QAAQ,CAACL,eAAe,EAAE,CAAC,CAC3B,GAAI,CAAC,CAACS,OAAO,CAAEA,OAAO,CAACC,OAAO,CAACC,KAAK,CAACL,MAAM,CAAGA,MAAM,CACtD,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIM,QAAO,CAAGR,KAAK,CAACQ,OAAO,EAAI,MAAM,CAErC,cAAoChB,QAAQ,EAAE,wCAAvCiB,UAAU,eAAEC,aAAa,eAEhC,GAAMC,OAAM,CAAGtB,UAAU,CAACQ,YAAY,CAAC,CAEvC,mBACE,KAAC,SAAS,EACR,aAAa,CAAE,KAAM,CACrB,oBAAoB,CAAE,IAAK,CAC3B,OAAO,CAAEQ,OAAQ,CACjB,KAAK,CAAE,CAAE,CACT,MAAM,CAAC,aAAa,CACpB,MAAM,CAAEL,KAAK,CAACY,MAAO,CACrB,eAAe,CAAEZ,KAAK,CAACa,KAAM,CAC7B,MAAM,CAAEb,KAAK,CAACc,MAAO,CACrB,IAAI,CAAEd,KAAK,CAACe,IAAK,CACjB,OAAO,CAAE,iBAACC,CAAC,CAAK,CACdf,QAAQ,CAACL,eAAe,EAAE,CAAC,CAC3B,GAAI,CAAC,CAACS,OAAO,CAAEA,OAAO,CAACC,OAAO,CAACC,KAAK,CAACL,MAAM,CAAGA,MAAM,CAEpD;AACA;AACA;AACF,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,uBAEA,YAAK,SAAS,CAAC,SAAS,CAAC,KAAK,CAAEF,KAAK,CAACO,KAAM,CAAC,GAAG,CAAEF,OAAQ,uBACxD,YAAK,SAAS,CAAC,YAAY,uBACzB,aAAK,SAAS,CAAC,cAAc,CAAC,KAAK,CAAE,CAAEG,OAAO,eAASA,OAAO,CAAG,CAAE,wBACjE,aAAK,SAAS,CAAC,WAAW,WACvBR,KAAK,CAACiB,KAAK,CACXjB,KAAK,CAACkB,OAAO,GACV,cACN,YAAK,SAAS,CAAC,YAAY,UAAElB,KAAK,CAACmB,QAAQ,EAAO,cAClD,YAAK,SAAS,CAAC,WAAW,CAAC,KAAK,CAAE,CAAEC,MAAM,CAAEZ,OAAQ,CAAE,EAAO,GACzD,EACF,EACF,EACI,CAEhB"},"metadata":{},"sourceType":"module"}